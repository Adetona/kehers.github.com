<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@kehers">
  <meta name="twitter:title" content="Random notes on SkyDrive Picker API">
  <meta name="twitter:description" content="I have spent the last couple of days integrating Dropbox, Google Drive and SkyDrive to Prowork. Of the three, I must say Dropbox has the most "charming" file picking API. Simple, straight, works. I...">
  <meta name="twitter:creator" content="@kehers">
  <title>Random notes on SkyDrive Picker API</title>
  <link href='https://fonts.googleapis.com/css?family=Libre+Baskerville:400,700' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Muli' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/assets/css/normalize.css">
  <link rel="stylesheet" href="/assets/css/skeleton.css">
  <link rel="stylesheet" href="/assets/css/custom.css">
  <link rel="stylesheet" href="/assets/css/zenburn.css" />
  <link rel="alternate" type="application/atom+xml" title="Blog post feed" href="/feed.xml">
</head>
<body>

<div class="container">
  <header>
    <div class="row">
      <div id="logo" class="three columns">
      <div id="menu">☰</div>
      <h3><a href="/">/opeyemi</a></h3>
    </div>
      <nav class="nine columns">
        <ul>
          <li><a href="/">Home</a></li>
          <li><a href="/posts.html">Posts</a></li>
          <li><a href="/feed.xml">RSS Feed</a></li>
          <li><a href="http://gum.co/Sxoj" class="bordered">Consuming REST APIs - a soft introduction</a></li>
      </ul>
      </nav>
    </div>
  </header>
  <div class="row">
    <div class="six offset-by-three columns">
      <article>
        <date>19 Mar 2013</date>
        <h1 class="title">Random notes on SkyDrive Picker API</h1>
        <p>I have spent the last couple of days integrating <a href="http://dropbox.com/">Dropbox</a>, <a href="http://drive.google.com/">Google Drive</a> and <a href="http://skydrive.com/">SkyDrive</a> to <a href="http://prowork.me/">Prowork</a>. Of the three, I must say Dropbox has the most "charming" file picking API. Simple, straight, works. I guess this has to do with the simplicity of the service because really GDrive and SkyDrive are more complex products. But that's just that about that. Unlike Dropbox where all you need is in a single page, you have to jump through pages to get the full picture of how to fix everything together for Sky Drive. Here are notes on how to get it with.</p>

<p>Note that this is a simple file picker architecture. There are many stunts you can pull with the Sky Drive API. And in many languages too. What we are however trying to do is to let users add their files from the service. We simply link to the file. We don't download and store. The language of use is Javascript.</p>

<p>That said...</p>

<ol>
<li><p><b>Include the js library</b><br />
I am surprised the examples on the <a href="http://msdn.microsoft.com/en-us/library/live/jj219328.aspx">picker api page</a> did not mention including the js library. If you just go ahead and do copy and paste, it won't work. You have to include the js library to start with. See <a href="http://msdn.microsoft.com/en-us/library/live/hh550837.aspx">Using the JavaScript library (Live Connect)</a> for more.</p>
<p><figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"http://js.live.net/v5.0/wl.js"</span><span class="nt">&gt;&lt;/script&gt;</span></code></pre></figure></p>
</li>

<li><p><b>WL.init()</b><br />
You have to <a href="http://msdn.microsoft.com/en-us/library/live/hh550844.aspx">initialize the javascript library</a>. This is missing from the picker page documentation too.</p>
<p><figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script&gt;</span>
	<span class="nx">WL</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span> 
		<span class="na">client_id</span><span class="p">:</span> <span class="nx">YOUR_CLIENT_ID</span><span class="p">,</span> 
		<span class="na">redirect_uri</span><span class="p">:</span> <span class="nx">YOUR_REDIRECT_URL</span>	
	<span class="p">});</span>
<span class="nt">&lt;/script&gt;</span></code></pre></figure></p>
</li>
<li><p><b>Client ID, redirect url and localhost</b><br />
Where is my CLIENT_ID and REDIRECT_URL? If you are familiar with APIs you will know what these are already. You won't however find a link to where you can get/set these parameters in the WL.init() doc page. You can do this from "<a href="https://manage.dev.live.com/?mkt=en-us">My Apps</a>". Where it however gets interesting is that you can't add localhost as your redirect url. <i>"...you must map your domain to the Internet Protocol (IP) address of your local web server"</i> <a href="http://msdn.microsoft.com/en-us/library/live/hh826547.aspx">[source]</a> by editing some file somewhere in the System32 folder. I didn't do that though. (I hate things like that). I pushed up a test file and tested live on the server.</p>
</li>
<li><p><b>Callback</b><br />
And when I thought everything was set, something else happened. When I click the SkyDrive button, a popup opens, everything works, then I pick a file then the popup itself redirects to Prowork (I actually set the redirect url to <i>http://prowork.me</i>) instead of closing and calling the callback function in my code. Turns out I have to create a seperate callback file for my redirect url. It is nothing big. This is all it needs to contain.</p>
<p><figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;title&gt;&lt;/title&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"http://js.live.net/v5.0/wl.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></figure></p>
<p>I saved that as <i>callback.htm</i> and edited my redirect url</p>
<p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">WL</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
	<span class="na">client_id</span><span class="p">:</span> <span class="nx">MY_CLIENT_ID</span><span class="p">,</span> 
	<span class="na">redirect_uri</span><span class="p">:</span> <span class="s2">"http://prowork.me/callback.htm"</span>
<span class="p">});</span></code></pre></figure></p>
<p>And that's all.<p>
</li>
</ol>
<p>I hope this saves someone some time. By the way, the three services are live on <a href="http://prowork.me/">Prowork</a> already. Take some time to check them out.</p>
      </article>
    </div>
  </div>
</div>
<div class="colophon">
  <div class="container">
    <div class="row">
      <div class="author six offset-by-three columns">
        <img src="https://igcdn-photos-f-a.akamaihd.net/hphotos-ak-xfp1/t51.2885-15/e15/10617063_553407278119581_1973098870_n.jpg" class="avi"> <p>My name is Opeyemi Obembe. I build things for web and mobile. You should follow me on Twitter (<a href="http://twitter.com/kehers">@kehers</a>).</p>
      </div>
    </div>
    <div class="row p-t-20">
      <div class="six offset-by-three columns">
        
        
        
        <article class="m-t-20">
          <h4 class="title m-b-20">Next post</h4>
          <h5 class="libre no-margin"><a href="/2013/03/17/100-truths.html">100 truths</a></h5>
        </article>
        
        <h4 class="title">Comments</h4>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
          var disqus_shortname = 'kehers';
          (function() {
              var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
              dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
        </script>
      </div>
    </div>
  </div>
</div>

<footer>
  <div class="container">
    <div class="row">
      <div class="three offset-by-three columns">
        <a href="/">/opeyemi</a> · <a href="http://github.com/kehers/kehers.github.com">Source</a> · <a href="/feed.xml">RSS feed</a>
      </div>
      <div class="three columns">
        <a href="http://twitter.com/kehers">Twitter</a> · <a href="http://github.com/kehers">Github</a> · <a href="http://instagram.com/kehers">Instagram</a> · <a href="http://500px.com/kehers">500px</a>
    </div>
    </div>
  </div>
</footer>

<script type="text/javascript" src="/assets/js/menu.js"></script>
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-53373832-1', 'auto');
ga('send', 'pageview');
</script>

</body>
</html>