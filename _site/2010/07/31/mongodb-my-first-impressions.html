<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@kehers">
  <meta name="twitter:title" content="MongoDb - my first impressions">
  <meta name="twitter:description" content="
I've been toying on new things of late by giving a shot at new frameworks, standards and general development tools. And MongoDb has been one of the new love.
There is this project I'm playing wi...">
  <meta name="twitter:creator" content="@kehers">
  <title>MongoDb - my first impressions</title>
  <link href='https://fonts.googleapis.com/css?family=Libre+Baskerville:400,700' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Muli' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/assets/css/normalize.css">
  <link rel="stylesheet" href="/assets/css/skeleton.css">
  <link rel="stylesheet" href="/assets/css/custom.css">
  <link rel="stylesheet" href="/assets/css/zenburn.css" />
  <link rel="alternate" type="application/atom+xml" title="Blog post feed" href="/feed.xml">
</head>
<body>

<div class="container">
  <header>
    <div class="row">
      <div id="logo" class="three columns">
      <div id="menu">☰</div>
      <h3><a href="/">/opeyemi</a></h3>
    </div>
      <nav class="nine columns">
        <ul>
          <li><a href="/">Home</a></li>
          <li><a href="/posts.html">Posts</a></li>
          <li><a href="/feed.xml">RSS Feed</a></li>
          <li><a href="http://gum.co/Sxoj" class="bordered">Consuming REST APIs - a soft introduction</a></li>
      </ul>
      </nav>
    </div>
  </header>
  <div class="row">
    <div class="six offset-by-three columns">
      <article>
        <date>31 Jul 2010</date>
        <h1 class="title">MongoDb - my first impressions</h1>
        <p><img src="/assets/image/2010/07/12975944-speed.jpg" /></p>
<p>I've been toying on new things of late by giving a shot at new frameworks, standards and general development tools. And <a href="http://mongodb.org">MongoDb</a> has been one of the new love.</p>
<p>There is this project I'm playing with that has something along the lines of a contact manager. Thing is the app involves way too many database writes. An example is importing a set of contacts (in VCard). Each contact imported performs multiple writes across 4 different tables. In short, importing a collection of 100 contacts (zipped) performs nothing less than 500 writes and could even be as much as 800 depending on the availability of different contact elements (VCard standard) like <em>addr, role, email, org</em>, etc. Profiling (locally on my PC), I got around 20 sec (including script execution time) for an import action of a collection of 144 vcard contacts using MySQL as my DB. This is quite worrysome. I switched the database engine to Mongo and killed the relationships between the 4 tables used for contacts insertion to one. Guess what? I got just around 2 seconds against MySQL's 20 secs. The write speed is just so great!</p>
<p>I've since been converting the whole project to use MongoDb. It's quite challenging though but its been fun. The very big challenge is having to do away with table relationships and joins. The plus however is that been non-relational, you are not constrained by the table's standard columns; meaning that each row in a table can have different columns (or fields). Say I have this in MySQL:</p>
<p><img src="/assets/image/2010/07/12976151-posterous.gif" /></p>
<p>It's interpretation in Mongo will simply go like</p>
<p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13</pre></td><td class="code"><pre><span class="p">[</span>
    <span class="nx">_id</span><span class="err">:</span> <span class="s2">"*some string of 24 hexidecimal chars*"</span><span class="p">,</span>
    <span class="c1">// Sorry, no auto increment ids (there are workarounds though)</span>
    <span class="nx">name</span><span class="err">:</span> <span class="s2">"Opeyemi Obembe"</span><span class="p">,</span>
    <span class="nx">email</span><span class="err">:</span> <span class="p">[</span><span class="s2">"ray@ngbot.com"</span><span class="p">,</span> <span class="s2">"ray@devedgelabs.com"</span><span class="p">],</span>
    <span class="nx">tel</span> <span class="err">:</span> <span class="s2">"08066887840"</span>
<span class="p">]</span>
<span class="p">[</span>
    <span class="nx">_id</span><span class="err">:</span> <span class="s2">"***"</span><span class="p">,</span>
    <span class="nx">name</span><span class="err">:</span> <span class="s2">"Ernest Ojeh"</span><span class="p">,</span>
    <span class="nx">email</span><span class="err">:</span> <span class="p">[</span><span class="s2">"ernest@ngbot.com"</span><span class="p">],</span> <span class="c1">// Just an email</span>
    <span class="nx">pro</span><span class="err">:</span> <span class="mi">1</span>
<span class="p">]</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure></p>
<p>Soon I hope I will be able to share some quite trouble necked queries and their workarounds</p>

      </article>
    </div>
  </div>
</div>
<div class="colophon">
  <div class="container">
    <div class="row">
      <div class="author six offset-by-three columns">
        <img src="https://igcdn-photos-f-a.akamaihd.net/hphotos-ak-xfp1/t51.2885-15/e15/10617063_553407278119581_1973098870_n.jpg" class="avi"> <p>My name is Opeyemi Obembe. I build things for web and mobile. You should follow me on Twitter (<a href="http://twitter.com/kehers">@kehers</a>).</p>
      </div>
    </div>
    <div class="row p-t-20">
      <div class="six offset-by-three columns">
        
        
        
        <article class="m-t-20">
          <h4 class="title m-b-20">Next post</h4>
          <h5 class="libre no-margin"><a href="/2010/07/25/building-a-community-the-first-rule.html">Building a community, the first rule</a></h5>
        </article>
        
        <h4 class="title">Comments</h4>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
          var disqus_shortname = 'kehers';
          (function() {
              var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
              dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
        </script>
      </div>
    </div>
  </div>
</div>

<footer>
  <div class="container">
    <div class="row">
      <div class="three offset-by-three columns">
        <a href="/">/opeyemi</a> · <a href="http://github.com/kehers/kehers.github.com">Source</a> · <a href="/feed.xml">RSS feed</a>
      </div>
      <div class="three columns">
        <a href="http://twitter.com/kehers">Twitter</a> · <a href="http://github.com/kehers">Github</a> · <a href="http://instagram.com/kehers">Instagram</a> · <a href="http://500px.com/kehers">500px</a>
    </div>
    </div>
  </div>
</footer>

<script type="text/javascript" src="/assets/js/menu.js"></script>
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-53373832-1', 'auto');
ga('send', 'pageview');
</script>

</body>
</html>