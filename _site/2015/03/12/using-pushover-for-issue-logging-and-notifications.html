<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@kehers">
  <meta name="twitter:title" content="Using Pushover for issue logging and notifications">
  <meta name="twitter:description" content="Things go wrong within applications, in production. A good thing to do is to build a way to automatically capture and log the issue and related data. This way, these issues don’t just go unnoticed....">
  <meta name="twitter:creator" content="@kehers">
  <title>Using Pushover for issue logging and notifications</title>
  <link href='https://fonts.googleapis.com/css?family=Libre+Baskerville:400,700' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Muli' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/assets/css/normalize.css">
  <link rel="stylesheet" href="/assets/css/skeleton.css">
  <link rel="stylesheet" href="/assets/css/custom.css">
  <link rel="stylesheet" href="/assets/css/zenburn.css" />
  <link rel="alternate" type="application/atom+xml" title="Blog post feed" href="/feed.xml">
</head>
<body>

<div class="container">
  <header>
    <div class="row">
      <div id="logo" class="three columns">
      <div id="menu">☰</div>
      <h3><a href="/">/opeyemi</a></h3>
    </div>
      <nav class="nine columns">
        <ul>
          <li><a href="/">Home</a></li>
          <li><a href="/posts.html">Posts</a></li>
          <li><a href="/feed.xml">RSS Feed</a></li>
          <li><a href="http://gum.co/Sxoj" class="bordered">Consuming REST APIs - a soft introduction</a></li>
      </ul>
      </nav>
    </div>
  </header>
  <div class="row">
    <div class="six offset-by-three columns">
      <article>
        <date>12 Mar 2015</date>
        <h1 class="title">Using Pushover for issue logging and notifications</h1>
        <p>Things go wrong within applications, in production. A good thing to do is to build a way to automatically capture and log the issue and related data. This way, these issues don’t just go unnoticed. And the location of the issue is known too, which is like half problem solved.</p>

<p>Here is an example source:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">db</span><span class="p">.</span><span class="nx">collection</span><span class="p">(</span><span class="s1">'products'</span><span class="p">).</span><span class="nx">findOne</span><span class="p">({</span><span class="na">url</span> <span class="p">:</span> <span class="nx">link</span><span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">doc</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Some unexpected error here. What could it be?
</span>
    <span class="c1">// Log it!
</span>

    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// ...
</span>
<span class="p">});</span></code></pre></figure>

<p>There are a lot of ways to log application errors from file to sending an email. I have even used Mixpanel (in cases where I am already using Mixpanel for other events). Another trick is using Twitter. Register a twitter account, make it private, ‘tweet’ the logs and follow the account. Or send the logs to yourself as DM. Another interesting way I recently discovered is using <a href="http://pushover.net/">Pushover</a>.</p>

<p>Pushover works in two simple steps.</p>

<ol>
  <li>You <del>create</del> register an application (and get an API key). You can start sending notifications via the <a href="https://pushover.net/api">API</a> or any of the <a href="https://pushover.com/clients">apps and plugins</a>.</li>
  <li>You add a device to receive notifications on. This can be any of the <a href="https://pushover.com/clients">Android, iOS and desktop clients</a>. Costs a one time $5 fee that is absolutely worth it. Once there is a notification for any of your app, the device gets the notification via push. You can also create groups and allow multiple people receive notifications for any of your applications.</li>
</ol>

<p>Back to our example source, we can use Pushover to log the issue and send a notification. For NodeJs, I use the module <a href="https://github.com/qbit/node-pushover">Pushover Notifications</a>.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">push</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'pushover-notifications'</span><span class="p">),</span>
   <span class="c1">// other modules here
</span>
  <span class="p">;</span>

<span class="c1">// My PushOver tokens (set in my environment)
</span>
<span class="kd">var</span> <span class="nx">pusher</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">push</span><span class="p">({</span>
    <span class="na">user</span><span class="p">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">[</span><span class="s1">'PUSHOVER_USER'</span><span class="p">],</span>
    <span class="na">token</span><span class="p">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">[</span><span class="s1">'PUSHOVER_TOKEN'</span><span class="p">]</span>
  <span class="p">});</span>

<span class="nx">db</span><span class="p">.</span><span class="nx">collection</span><span class="p">(</span><span class="s1">'products'</span><span class="p">).</span><span class="nx">findOne</span><span class="p">({</span><span class="na">url</span> <span class="p">:</span> <span class="nx">link</span><span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">doc</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">pusher</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
      <span class="na">title</span><span class="p">:</span> <span class="s1">'DB error'</span><span class="p">,</span>
      <span class="na">message</span><span class="p">:</span> <span class="s1">'Link: '</span><span class="o">+</span><span class="nx">link</span><span class="o">+</span><span class="s1">'; Error: '</span><span class="o">+</span><span class="nx">err</span>
    <span class="p">});</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// ...
</span>
<span class="p">});</span></code></pre></figure>

<p>Once there is an error, this will send a push notification to my device (I am using the Android app). Easy and works.</p>

<p>PS: If you are looking for a logging class for PHP, check out <a href="https://github.com/Seldaek/monolog">Monolog</a>.</p>

      </article>
    </div>
  </div>
</div>
<div class="colophon">
  <div class="container">
    <div class="row">
      <div class="author six offset-by-three columns">
        <img src="https://igcdn-photos-f-a.akamaihd.net/hphotos-ak-xfp1/t51.2885-15/e15/10617063_553407278119581_1973098870_n.jpg" class="avi"> <p>My name is Opeyemi Obembe. I build things for web and mobile. You should follow me on Twitter (<a href="http://twitter.com/kehers">@kehers</a>).</p>
      </div>
    </div>
    <div class="row p-t-20">
      <div class="six offset-by-three columns">
        
        
        
        <article class="m-t-20">
          <h4 class="title m-b-20">Next post</h4>
          <h5 class="libre no-margin"><a href="/2015/01/18/mongodb-the-why.html">MongoDB; the why</a></h5>
        </article>
        
        <h4 class="title">Comments</h4>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
          var disqus_shortname = 'kehers';
          (function() {
              var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
              dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
        </script>
      </div>
    </div>
  </div>
</div>

<footer>
  <div class="container">
    <div class="row">
      <div class="three offset-by-three columns">
        <a href="/">/opeyemi</a> · <a href="http://github.com/kehers/kehers.github.com">Source</a> · <a href="/feed.xml">RSS feed</a>
      </div>
      <div class="three columns">
        <a href="http://twitter.com/kehers">Twitter</a> · <a href="http://github.com/kehers">Github</a> · <a href="http://instagram.com/kehers">Instagram</a> · <a href="http://500px.com/kehers">500px</a>
    </div>
    </div>
  </div>
</footer>

<script type="text/javascript" src="/assets/js/menu.js"></script>
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-53373832-1', 'auto');
ga('send', 'pageview');
</script>

</body>
</html>